<div class="flex-auto">
    <div class="w-full max-w-screen-xl mx-auto">
        <ng-container>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 w-full min-w-0">
                <div class="sm:col-span-2 md:col-span-4 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden" *ngIf="usuarios.length && !loading">
                    <div class="flex flex-col sm:flex-row items-start justify-between">
                        <div class="text-lg font-medium tracking-tight leading-6 truncate">
                            Usuários que efetuaram login no período selecionado
                        </div>
                        <div class="mt-3 sm:mt-0 sm:ml-2">
                            <mat-button-toggle-group
                                value="this-week"
                                #githubIssuesWeekSelector="matButtonToggleGroup">
                                <mat-button-toggle value="last-week" (click)="obterUsuariosAtivos(-7)">Semanal</mat-button-toggle>
                                <mat-button-toggle value="last-week" (click)="obterUsuariosAtivos(-30)">Mensal</mat-button-toggle>
                                <mat-button-toggle value="last-week" (click)="obterUsuariosAtivos(-90)">Trimestral</mat-button-toggle>
                                <mat-button-toggle value="last-week" (click)="obterUsuariosAtivos(-180)">Semestral</mat-button-toggle>
                                <mat-button-toggle value="this-week" (click)="obterUsuariosAtivos(-365)">Anual</mat-button-toggle>
                            </mat-button-toggle-group>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-1 grid-flow-row gap-6 w-full mt-8 sm:mt-4">
                        <div class="flex flex-col">
                            <div class="font-medium text-secondary">
                                Selecione o período para atualizar os dados
                            </div>

                            <div class="flex-auto grid grid-cols-6 gap-4 mt-6">
                                <div class="col-span-2 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-indigo-200 text-indigo-800">
                                    <div class="text-5xl sm:text-7xl font-semibold leading-none tracking-tight">
                                        {{ usuariosAtivos.length }}
                                    </div>

                                    <div class="mt-1 text-sm sm:text-lg font-medium">Usuários Ativos</div>
                                </div>
                                
                                <div *ngFor="let perfil of perfisAtivos" (click)="onUsuarios(perfil.usuarios)" class="cursor-pointer col-span-2 sm:col-span-1 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-indigo-50 text-indigo-600">
                                    <div class="text-5xl font-semibold leading-none tracking-tight">
                                        {{ perfil.usuarios.length }}
                                    </div>

                                    <div class="mt-1 text-xs font-medium text-center uppercase">
                                        {{ perfil.nomePerfil }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 w-full min-w-0">
                <div class="sm:col-span-2 md:col-span-4 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden" *ngIf="usuarios.length && !loading">
                    <div class="flex flex-col sm:flex-row items-start justify-between">
                        <div class="text-lg tracking-tight leading-6 truncate font-semibold">
                            Usuários online
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-1 grid-flow-row gap-6 w-full mt-2 sm:mt-4">
                        <div class="flex flex-col">
                            <div class="flex-auto grid grid-cols-6 gap-4 mt-6">
                                <div class="col-span-2 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-green-200 text-green-800">
                                    <div class="text-5xl sm:text-7xl font-semibold leading-none tracking-tight break-all">
                                        {{ usuariosOnline.length }} 
                                    </div>

                                    <div class="mt-1 text-sm sm:text-lg font-medium">
                                        Usuários Online: {{ (usuariosOnline.length / (usuariosAtivos.length || 1) * 100).toFixed(0) }}%
                                    </div>
                                </div>
                                
                                <div *ngFor="let perfil of perfisOnline" (click)="onUsuarios(perfil.usuarios)" class="cursor-pointer col-span-2 sm:col-span-1 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-green-50 text-green-600">
                                    <div class="text-5xl font-semibold leading-none tracking-tight">
                                        {{ perfil.usuarios.length }}
                                    </div>

                                    <div class="mt-1 text-xs font-medium text-center uppercase">
                                        {{ perfil.nomePerfil }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sm:col-span-2 md:col-span-4 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden" *ngIf="loading">
                Carregando...
            </div>
        </ng-container>
    </div>
</div>