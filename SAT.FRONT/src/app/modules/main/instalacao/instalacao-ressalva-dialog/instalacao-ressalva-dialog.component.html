<div class="flex flex-col max-w-360 md:min-w-160 -m-6">
    <div
        class="flex flex-0 items-center justify-between h-16 pr-3 sm:pr-5 pl-6 sm:pl-8 bg-primary text-on-primary sticky -top-6 z-20">
        <div class="text-lg font-medium">Ressalvas</div>

        <div>
            <button mat-icon-button (click)="fechar()">
                <mat-icon class="text-current" [svgIcon]="'heroicons_outline:x'"></mat-icon>
            </button>
        </div>
    </div>

    <div class="flex flex-col flex-auto py-6 pl-5 z-10" *transloco="let t">
        <form [formGroup]="formRessalva">
            <div class="flex flex-auto">
                <mat-form-field class="fuse-mat-dense w-48 pr-2">
                    <mat-label>{{ t('motivo') }}</mat-label>

                    <mat-select formControlName="codInstalMotivoRes">
                        <mat-option class="uppercase" *ngFor="let motivo of motivos"
                            [value]="motivo.codInstalMotivoRes">
                            <span>{{ motivo.descMotivoRes }}</span>
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field class="fuse-mat-dense w-48 pr-2">
                    <mat-label>{{ t('comentario') }}</mat-label>
                    <input matInput formControlName="comentario">
                </mat-form-field>

                <mat-form-field class="fuse-mat-dense w-48 pr-2">
                    <mat-label>{{ t('data ocorrencia') }}</mat-label>
                    <input matInput (click)="ocorrenciaData.open()" (keydown)="false" [matDatepicker]="ocorrenciaData"
                        formControlName="dataOcorrencia">
                    <mat-datepicker-toggle matSuffix [for]="ocorrenciaData"></mat-datepicker-toggle>
                    <mat-datepicker #ocorrenciaData></mat-datepicker>
                    <mat-error>{{t('preencher campo')}}</mat-error>
                </mat-form-field>

                <div class="py-7 pr-2">
                    <mat-checkbox [color]="'primary'" [formControlName]="'indJustificativa'">
                        {{ t('justificativa') }}
                    </mat-checkbox>

                    <button mat-button [color]="'primary'" (click)="salvar()" [disabled]="!formRessalva.valid">
                        <span *ngIf="!formRessalva.disabled">
                            {{ t('salvar') }}
                        </span>
                    </button>
                </div>
            </div>
        </form>
    </div>

    <div class="flex flex-col flex-auto max-h-160" *transloco="let t">
        <div *ngFor="let data of dataSourceData?.items">
            <div class="flex-auto">
                <div class="w-full">
                    <div class="grid lg:grid-cols-12 sm:grid-cols-1 md:grid-cols-6 gap-12 w-full min-w-0">
                        <fuse-card
                            class="flex flex-col sm:col-span-12 rounded-none shadow-none flex-auto overflow-hidden">
                            <div class="bg-gray-50 px-6 py-2">
                                <p class="text-lg font-medium">Ressalva</p>
                            </div>

                            <div class="py-4 px-6">
                                <div class="flex items-center justify-between py-1">
                                    <div class="text-secondary">
                                        Motivo
                                    </div>

                                    <div class="truncate max-w-1/2">
                                        {{ data.instalacaoMotivoRes.descMotivoRes }}
                                    </div>
                                </div>

                                <div class="flex items-center justify-between py-1">
                                    <div class="text-secondary">
                                        Comentário
                                    </div>

                                    <div class="truncate max-w-1/2">
                                        {{ data.comentario }}
                                    </div>
                                </div>

                                <div class="flex items-center justify-between py-1">
                                    <div class="text-secondary">
                                        Data Ocorrência
                                    </div>

                                    <div class="truncate max-w-1/2">
                                        {{ data.dataOcorrencia | date:'dd/MM/yyyy HH:mm' }}
                                    </div>
                                </div>

                                <div class="flex items-center justify-between py-1">
                                    <div class="text-secondary">
                                        Justificativa
                                    </div>

                                    <div class="truncate max-w-1/2">
                                        {{ data.indJustificativa }}
                                    </div>
                                </div>
                            </div>
                        </fuse-card>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>