<mat-drawer-container class="flex-auto h-full">
    <mat-drawer class="w-full md:w-160 dark:bg-gray-900" [position]="'end'" #sidenav>
        <app-ordem-servico-transferencia [os]="os" [sidenav]="sidenav"></app-ordem-servico-transferencia>
    </mat-drawer>

    <mat-drawer-content>
        <div class="flex flex-col flex-auto min-w-0">
            <div class="bg-card">
                <div class="flex flex-col w-full max-w-screen-xl mx-auto px-6 sm:px-8">
                    <div class="flex flex-col sm:flex-row flex-auto sm:items-center min-w-0 my-8 sm:my-4"
                        *transloco="let t">
                        <div class="flex flex-auto items-center min-w-0">
                            <div class="flex-1 min-w-0">
                                <div class="flex flex-wrap items-center font-medium">
                                    <div>
                                        <a class="whitespace-nowrap text-primary-500" routerLink="/ordem-servico">
                                            {{ t('chamados') }}
                                        </a>
                                    </div>
                                    <div class="flex items-center ml-1 whitespace-nowrap">
                                        <mat-icon class="icon-size-5 text-secondary"
                                            [svgIcon]="'heroicons_solid:chevron-right'"></mat-icon>
                                        <span class="ml-1 text-secondary">{{ t('chamado') }}</span>
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <h6
                                        class="text-2xl md:text-2xl font-extrabold tracking-tight leading-6 sm:leading-6 truncate">
                                        {{ codOS }}
                                    </h6>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center mt-6 sm:mt-0 sm:ml-2 space-x-1">
                            <button *ngIf="!this.perfilCliente" class="fuse-mat-button-rounded text-green-500 bg-white" mat-flat-button
                                [disabled]="os?.codStatusServico === 3 || os?.codStatusServico === 2 || isLoading"
                                [matTooltip]="t('novo relatorio de atendimento')" matTooltipPosition="above"
                                [routerLink]="['/relatorio-atendimento/form/' + codOS]">
                                <mat-icon class="icon-size-6" [svgIcon]="'heroicons_solid:document-add'"></mat-icon>
                            </button>

                            <button *ngIf="!this.perfilCliente" class="fuse-mat-button-rounded text-yellow-500 bg-white" mat-flat-button
                                [color]="'primary'"
                                [disabled]="os?.codStatusServico === 3 || os?.codStatusServico === 2 || isLoading"
                                [matTooltip]="t('editar')" matTooltipPosition="above"
                                [routerLink]="['/ordem-servico/form/' + codOS]">
                                <mat-icon class="icon-size-6" [svgIcon]="'heroicons_solid:pencil'"></mat-icon>
                            </button>

                            <button *ngIf="!this.perfilCliente" class="fuse-mat-button-rounded text-blue-500 bg-white" mat-flat-button
                                [color]="'primary'"
                                [disabled]="os?.codStatusServico === 3 || os?.codStatusServico === 2 || isLoading"
                                [matTooltip]="t('agendar')" (click)="agendar()" matTooltipPosition="above">
                                <mat-icon class="icon-size-6" [svgIcon]="'heroicons_solid:clock'"></mat-icon>
                            </button>

                            <button class="fuse-mat-button-rounded text-indigo-700 bg-white" mat-flat-button
                                *ngIf="!this.perfilCliente && os?.codStatusServico != 8" [disabled]="os?.codStatusServico === 3 || os?.codStatusServico === 2 ||
                                os?.codStatusServico === 7 || isLoading" [matTooltip]="t('transferir')"
                                matTooltipPosition="above" (click)="sidenav.toggle()">
                                <mat-icon class="icon-size-6" [svgIcon]="'heroicons_solid:share'"></mat-icon>
                            </button>

                            <button  class="fuse-mat-button-rounded text-red-700 bg-white" mat-flat-button
                                *ngIf="os?.codStatusServico == 8 && !this.perfilCliente" [matTooltip]="t('cancelar transferencia')"
                                [disabled]="isLoading" matTooltipPosition="above" (click)="cancelarTransferencia()">
                                <mat-icon class="icon-size-6"[svgIcon]="'heroicons_solid:minus-circle'"></mat-icon>
                            </button>
                        </div>

                        <button *ngIf="!this.perfilCliente" class="ml-3 -mr-2 fuse-mat-button-rounded text-gray-700 bg-white" mat-flat-button
                            [matMenuTriggerFor]="menu" [disabled]="isLoading">
                            <mat-icon class="icon-size-6" [svgIcon]="'heroicons_outline:dots-vertical'"></mat-icon>

                            <mat-menu #menu>
                                <button *ngIf="!this.perfilCliente" mat-menu-item (click)="exportar()">
                                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:printer'"></mat-icon>
                                    {{ t('imprimir') }}
                                </button>

                                <button *ngIf="!this.perfilCliente" mat-menu-item (click)="cancelar()"
                                    [disabled]="verificarPermissaoCancelamento()">
                                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:ban'"></mat-icon>
                                    {{ t('cancelar') }}
                                </button>

                                <button *ngIf="!this.perfilCliente" mat-menu-item (click)="bloquearDesbloquearChamado()">
                                    <mat-icon class="icon-size-5"
                                    [class.text-red-600]="!os?.indBloqueioReincidencia"
                                    [class.text-green-600]="os?.indBloqueioReincidencia"
                                    [svgIcon]="os?.indBloqueioReincidencia ? 'heroicons_solid:lock-openned' : 'heroicons_solid:lock-closed'"></mat-icon>
                                    {{ os?.indBloqueioReincidencia ? 'Desbloquear' : 'Bloquear' }}
                                </button>

                                <button mat-menu-item (click)="reabrir()"
                                    *ngIf="verificarPermissaoReabertura()">
                                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:arrow-circle-up'"></mat-icon>
                                    {{ t('reabrir') }}
                                </button>

                                <button *ngIf="!this.perfilCliente" mat-menu-item (click)="openEmailDialog()">
                                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:mail'"></mat-icon>
                                    Enviar por e-mail
                                </button>

                                <button *ngIf="(os?.codCliente === 197 || os?.codCliente === 220) && os?.codStatusServico === 3" mat-menu-item (click)="reprocessarIntegracaoBRB()">
                                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:refresh'"></mat-icon>
                                    Reprocessar Integração BRB
                                </button>

                                <button mat-menu-item *ngIf="verificaPermissaoBB()" (click)="reenvioIntegracaoBBTS()">
                                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:refresh'"></mat-icon>
                                    Reprocessar Integração BBTS
                                </button>

                                <button mat-menu-item *ngIf="verificaPermissaoBB() && dispBBBloqueioOS.length" (click)="desbloqueioRATBBTS()">
                                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:lock-open'"></mat-icon>
                                    Desbloquear BBTS
                                </button>
                            </mat-menu>
                        </button>
                    </div>
                </div>
            </div>

            <div *ngIf="isLoading">
                <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
            </div>

            <div class="flex-auto mt-4 sm:mt-6" *transloco="let t">
                <div class="w-full max-w-screen-xl mx-auto" *ngIf="!isLoading">
                    <mat-tab-group class="sm:px-2" [animationDuration]="'0'" (selectedTabChange)="trocarTab($event)">
                        <!-- DETALHES DA OS -->
                        <mat-tab label="{{ t('detalhes') }}">
                            <ng-template matTabContent>
                                <div class="grid grid-cols-6 sm:grid-cols-1 md:grid-cols-6 gap-6 w-full min-w-0">
                                    <fuse-card
                                        class="flex flex-col col-span-3 flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                        <div class="text-lg font-medium mt-2">{{ t('chamado') }}</div>

                                        <div class="flex flex-col mt-4 border-t border-b divide-y font-medium">
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('abertura') }}</div>
                                                <div>{{ os?.dataHoraAberturaOS | date:'dd/MM/yyyy HH:mm' }}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3"
                                                *ngIf="os?.usuarioCadastro">
                                                <div class="text-secondary">{{ t('aberto por') }}</div>
                                                <div>
                                                    {{ os?.usuarioCadastro?.nomeUsuario || os?.codUsuarioCad || 'Não informado' }}
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3" *ngIf="os?.usuarioCad">
                                                <div class="text-secondary">{{ t('aberto por') }}</div>
                                                <div>
                                                    {{ os?.usuarioCad?.nomeUsuario || os?.codUsuarioCad || "Não informado" }}
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3" *ngIf="os?.usuarioCad">
                                                <div class="text-secondary">{{ t('nome solicitante') }}</div>
                                                <div>
                                                    {{ os?.nomeSolicitante || 'Não Informado' }}
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3" *ngIf="os?.usuarioCad">
                                                <div class="text-secondary">{{ t('telefone solicitante') }}</div>
                                                <div>
                                                    {{ os?.telefoneSolicitante || 'Não Informado' }}
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('os cliente') }}</div>
                                                <div>{{ os?.numOSCliente || 'Não Informado' }}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('os quarteirizada') }}</div>
                                                <div>{{ os?.numOSQuarteirizada || 'Não Informada' }}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3"
                                                *ngIf="os?.tecnico?.nome">
                                                <div class="text-secondary">{{ t('tecnico') }}</div>
                                                <div>{{ os?.tecnico?.nome | titlecase }}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3"
                                                *ngIf="os?.tecnico?.fonePerto">
                                                <div class="text-secondary">{{ t('tecnico fone') }}</div>
                                                <div>{{ os?.tecnico?.fonePerto | titlecase }}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('tipo de intervencao') }}</div>
                                                <div>
                                                    <span
                                                        class="mt-1 px-1.5 rounded text-sm font-semibold leading-5 p-1">
                                                        {{ os?.tipoIntervencao?.nomTipoIntervencao }}
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('status de servico') }}</div>
                                                <div>
                                                    <span
                                                        class="mt-1 px-1.5 rounded text-sm font-semibold leading-5 p-1"
                                                        [style.background-color]="os?.statusServico?.corFundo"
                                                        [style.color]="os?.statusServico?.corFonte">
                                                        {{ os?.statusServico?.nomeStatusServico }}
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3" *ngIf="os?.codStatusServico === 3">
                                                <div class="text-secondary">{{ t('fechamento') }}</div>
                                                <div>{{ os?.dataHoraFechamento | date:'dd/MM/yyyy HH:mm' }}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('os cliente') }}</div>
                                                <div>{{ os?.numOSCliente || 'Não Informado' }}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('cliente') }}</div>
                                                <div>{{ os?.cliente?.nomeFantasia || '--' }}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('reincidencia') }}</div>
                                                <div>{{ os?.numReincidencia ? os?.numReincidencia : t('nenhuma') }}
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('sugestao') }}</div>
                                                <div>{{ os?.sugestaoOS || 'Não Informado' }}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('exige laudo') }}</div>
                                                <div>{{ os?.indOSIntervencaoEquipamento ? 'Sim' : 'Não' }}</div>
                                            </div>
                                        </div>

                                        <div class="flex items-center justify-between mt-8">
                                            <div class="text-lg font-medium">{{ t('defeito') }}</div>
                                        </div>
                                        <div class="flex mt-2 border-t">
                                            <div class="py-3">
                                                <ng-container>
                                                    <div>{{ os?.defeitoRelatado }}</div>
                                                </ng-container>
                                            </div>
                                        </div>

                                        <div class="flex items-center justify-between mt-8" *ngIf="os?.motivoCancelamento">
                                            <div class="text-lg font-medium">{{ t('motivo cancelamento') }}</div>
                                        </div>
                                        <div class="flex mt-2 border-t text-justify" *ngIf="os?.motivoCancelamento">
                                            <div class="py-3">
                                                <ng-container>
                                                    <div>{{ os?.motivoCancelamento }}</div>
                                                </ng-container>
                                            </div>
                                        </div>

                                        <div class="flex items-center justify-between mt-8">
                                            <div class="text-lg font-medium">{{ t('observacao') }}</div>
                                        </div>
                                        <div class="flex mt-2 border-t text-justify">
                                            <div class="py-3">
                                                <ng-container>
                                                    <div>{{ os?.observacaoCliente || 'Não Informado' }}</div>
                                                </ng-container>
                                            </div>
                                        </div>

                                        <div class="flex items-center justify-between mt-8">
                                            <div class="text-lg font-medium">{{ t('marcacao especial') }}</div>
                                        </div>
                                        <div class="flex mt-2 border-t text-justify">
                                            <div class="py-3">
                                                <ng-container>
                                                    <div> {{ os?.descMotivoMarcaEspecial || 'Não Informado' }}</div>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </fuse-card>

                                    <fuse-card
                                        class="flex flex-col flex-auto col-span-3 p-6 bg-card shadow rounded-2xl overflow-hidden">
                                        <div class="text-lg font-medium mt-2">{{ t('local') }}/{{ t('equipamento') }}
                                        </div>

                                        <div class="flex mt-4">
                                            <div class="pt-2">
                                                <ng-container>
                                                    <div>
                                                        {{ os?.cliente?.nomeFantasia }} -
                                                        {{ (os?.localAtendimento?.nomeLocal || t('nao informado')) }}
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </div>

                                        <div class="flex flex-col mt-4 border-t border-b divide-y font-medium">
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('agencia') }}</div>
                                                <div>{{ os?.localAtendimento?.numAgencia || '--' }}/{{
                                                    os?.localAtendimento?.dcPosto || '--' }}
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('equipamento') }}</div>
                                                <div>
                                                    <span class="cursor-help"
                                                        [matTooltip]="os?.equipamentoContrato?.acordoNivelServico?.descSLA"
                                                        matTooltipPosition="above">
                                                        {{ os?.equipamento?.nomeEquip ||
                                                        os?.equipamentoContrato?.equipamento?.nomeEquip || '--' }}
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('serie') }}</div>
                                                <div>
                                                    <span>
                                                        {{ os?.equipamentoContrato?.numSerie || t('nao informado') }}
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('serie cliente') }}</div>
                                                <div>
                                                    <span>
                                                        {{ os?.equipamentoContrato?.numSerieCliente || t('nao informado') }}
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('sla') }}</div>
                                                <div>
                                                    <span class="cursor-help"
                                                        [matTooltip]="os?.equipamentoContrato?.acordoNivelServico?.descSLA"
                                                        matTooltipPosition="above">
                                                        {{ os?.equipamentoContrato?.acordoNivelServico?.nomeSLA || 'Não Informado' }}
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3"
                                                *ngIf="os?.prazosAtendimento[os.prazosAtendimento?.length - 1]?.dataHoraLimiteAtendimento">
                                                <div class="text-secondary">{{ t('fim sla') }}</div>
                                                <div>
                                                    {{ (os?.prazosAtendimento[os.prazosAtendimento?.length -
                                                    1]?.dataHoraLimiteAtendimento | date:'dd/MM/yy HH:mm') }}
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('contrato') }}</div>
                                                <div>
                                                    {{ os?.equipamentoContrato?.contrato?.nomeContrato || 'Não Informado' }}
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('filial') }}</div>
                                                <div>{{ os?.filial?.nomeFilial || 'Não Informado'}}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('autorizada') }}</div>
                                                <div>{{ os?.autorizada?.nomeFantasia || 'Não Informado'}}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('regiao') }}</div>
                                                <div>{{ os?.regiao?.nomeRegiao || 'Não Informado'}}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('distancia da pat') }}</div>
                                                <div>{{ os?.localAtendimento?.distanciaKmPatRes || 'Não Informado' }}
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">Necessário Agendamento com Carro Forte</div>
                                                <div>{{ os?.equipamentoContrato?.indSemat ? 'Sim' : 'Não' }}</div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">Atendimento Sábado, Domingo e Feriado</div>
                                                <div>{{ os?.equipamentoContrato?.pontoEstrategico == 2 ? 'Sim' : 'Não' }}</div>
                                            </div>
                                        </div>

                                        <div class="flex items-center justify-between mt-8" *ngIf="os?.chamado">
                                            <div class="text-lg font-medium">POS</div>
                                        </div>

                                        <div class="flex flex-col mt-4 border-t border-b divide-y font-medium" *ngIf="os?.chamado">
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('estabelecimento') }}</div>
                                                <div>
                                                    {{ os?.numAgenciaBanco }}
                                                </div>
                                            </div>
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('rede') }}</div>
                                                <div>
                                                    {{ os?.redeEquipamento }}
                                                </div>
                                            </div>
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('terminal') }}</div>
                                                <div>
                                                    {{ os?.numTerminal }}
                                                </div>
                                            </div>
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('defeito') }}</div>
                                                <div>
                                                    {{ os?.chamado?.defeitoPOS?.nomeDefeitoPOS }}

                                                </div>
                                            </div>
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('tipo de comunicacao') }}</div>
                                                <div>
                                                    {{ os?.chamado?.chamadoDadosAdicionais?.tipoComunicacaoTela.toString() }}
                                                </div>
                                            </div>                                                                                                                         
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('versao') }}</div>
                                                <div>
                                                    {{ os?.numAgenciaNI }}
                                                </div>
                                            </div>                                                                                                                         
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('data-autenticacao') }}</div>
                                                <div *ngIf="os?.chamado?.chamadoDadosAdicionais?.autenticacao">
                                                    {{ os?.chamado?.chamadoDadosAdicionais?.autenticacao | date:'dd/MM/yyyy HH:mm' }}
                                                </div>
                                                <div *ngIf="!os?.chamado?.chamadoDadosAdicionais?.autenticacao">
                                                    {{ 'Não Informado'}}
                                                </div>
                                            </div>                                                                                                                         
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('simcard') }}</div>
                                                <div>
                                                    {{ os?.chamado?.chamadoDadosAdicionais?.simCard || 'Não Informado' }}
                                                </div>
                                            </div>                                                                                                                         
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('operadora telefonia') }}</div>
                                                <div>
                                                    {{ os?.chamado?.operadoraTelefonia?.nomeOperadoraTelefonia }}
                                                </div>
                                            </div>                                                                                                                         
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('ddd') }}</div>
                                                <div>
                                                    {{ os?.chamado?.chamadoDadosAdicionais?.ddd || 'Não Informado' }}
                                                </div>
                                            </div>                                                                                                                         
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">{{ t('numero') }}</div>
                                                <div>
                                                    {{ os?.chamado?.chamadoDadosAdicionais?.numero || 'Não Informado' }}
                                                </div>
                                            </div>                                                                                                                         
                                        </div>

                                        <div class="flex items-center justify-between mt-8">
                                            <div class="text-lg font-medium">{{ t('endereco') }}</div>
                                        </div>

                                        <div class="flex mt-2 border-t">
                                            <div class="py-3">
                                                <ng-container>
                                                    <div>
                                                        <span>Logradouro:</span>
                                                        {{ os?.localAtendimento?.endereco || 'Não Informado' }}
                                                    </div>

                                                    <div>
                                                        <span>Cidade:</span>
                                                        {{ os?.localAtendimento?.cidade?.nomeCidade || 'Não Informado' }}
                                                    </div>

                                                    <div>
                                                        <span>UF:</span>
                                                        {{ os?.localAtendimento?.cidade?.unidadeFederativa?.siglaUF || 'Não Informado' }}
                                                    </div>
                                                        
                                                    <div>
                                                        <span>CEP:</span>
                                                        {{ os?.localAtendimento?.cep || 'Não Informado' }}
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </fuse-card>
                                </div>
                            </ng-template>
                        </mat-tab>

                        <!-- AGENDAMENTOS -->
                        <mat-tab [disabled]="!os?.agendamentos?.length" *ngIf="!perfilCliente">
                            <ng-template matTabLabel>
                                <span [class.opacity-50]="!os?.agendamentos?.length">
                                    {{ t('agendamentos') }}
                                    <span class="bg-purple-600 text-blue-50 py-1 px-2 rounded text-xs font-bold ml-1"
                                        *ngIf="os?.agendamentos?.length">
                                        {{ os?.agendamentos?.length }}
                                    </span>
                                </span>
                            </ng-template>

                            <ng-template matTabContent>
                                <fuse-card class="flex flex-col flex-auto p-6 pt-px w-2/5 mb-4"
                                    *ngFor="let agendamento of os?.agendamentos">
                                    <div class="flex items-center justify-between mt-5">
                                        <div class="text-xl font-medium">{{ agendamento?.motivoAgendamento?.descricaoMotivo }}</div>

                                        <div *ngIf="userSession.usuario.codPerfil == 3 || userSession.usuario.codPerfil == 75 || userSession.usuario.codPerfil == 29">
                                            <button mat-icon-button matTooltip="Remover" (click)="removerAgendamento(agendamento)">
                                                <mat-icon class="icon-size-5 text-red-600" [svgIcon]="'heroicons_solid:trash'">
                                                </mat-icon>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="flex flex-col mt-4 divide-y font-medium">
                                        <div class="flex items-center justify-between py-3">
                                            <div class="text-secondary">Data</div>
                                            <div>{{ agendamento?.dataAgendamento | date:'dd/MM/yyyy HH:mm' }}</div>
                                        </div>

                                        <div class="flex items-center justify-between py-3">
                                            <div class="text-secondary">Usuário</div>
                                            <div>{{ agendamento?.codUsuarioAgendamento }}</div>
                                        </div>
                                    </div>
                                </fuse-card>
                            </ng-template>
                        </mat-tab>

                        <!-- ALERTAS -->
                        <mat-tab [disabled]="!os?.alertas?.length" *ngIf="!this.perfilCliente">
                            <ng-template matTabLabel>
                                <span [class.opacity-50]="!os?.alertas?.length">
                                    {{ t('alertas') }}
                                    <span class="bg-orange-500 text-blue-50 py-1 px-2 rounded text-xs font-bold ml-1"
                                        *ngIf="os?.alertas?.length">
                                        {{ os?.alertas?.length || 0}}
                                    </span>
                                </span>
                            </ng-template>

                            <ng-template matTabContent>
                                <div class="flex flex-col flex-auto p-6 pt-px w-2/3">
                                    <fuse-alert *ngFor="let alerta of os?.alertas" class="mt-4" [type]="alerta?.tipo"
                                        [appearance]="'border'">
                                        <span fuseAlertTitle>{{ alerta?.titulo }}</span>
                                        <div class="rounded mt-2 text-justify" *ngFor="let desc of alerta?.descricao">
                                            {{ desc }}
                                        </div>
                                    </fuse-alert>
                                </div>
                            </ng-template>
                        </mat-tab>

                        <!-- ATUALIZACOES -->
                        <mat-tab [disabled]="!historico?.length" *ngIf="!this.perfilCliente" >
                            <ng-template matTabLabel>
                                <span [class.opacity-50]="!historico?.length">
                                    {{ t('log') }}

                                    <span class="bg-green-600 text-blue-50 py-1 px-2 rounded text-xs font-bold ml-1"
                                        *ngIf="historico?.length">
                                        {{ historico?.length || 0}}
                                    </span>
                                </span>
                            </ng-template>

                            <ng-template matTabContent>
                                <ol>
                                    <ng-container *ngFor="let hist of historico; let i = index">
                                        <li class="relative flex py-6">
                                            <ng-container *ngIf="historico.length-1 !== i">
                                                <div class="absolute top-7 left-5 w-0.5 h-full -ml-px bg-gray-300 dark:bg-gray-600"></div>
                                            </ng-container>

                                            <div class="relative flex flex-auto">
                                                <ng-container>
                                                    <div *ngIf="!hist?.tipo" class="flex flex-shrink-0 items-center justify-center w-10 h-10 mr-4 rounded-full bg-green-400">
                                                        <mat-icon
                                                            class="icon-size-5 text-white"
                                                            [svgIcon]="'heroicons_solid:refresh'">
                                                        </mat-icon>
                                                    </div>

                                                    <div *ngIf="hist?.tipo" class="flex flex-shrink-0 items-center justify-center w-10 h-10 mr-4 rounded-full bg-orange-400">
                                                        <mat-icon
                                                            class="icon-size-5 text-white"
                                                            [svgIcon]="'heroicons_solid:location-marker'">
                                                        </mat-icon>
                                                    </div>
                                                </ng-container>
        
                                                <div class="flex flex-col flex-auto items-start">
                                                    <ng-container>
                                                        <div *ngIf="hist?.statusServico?.nomeStatusServico" [innerHTML]="hist?.statusServico?.nomeStatusServico"></div>
                                                        <div *ngIf="hist?.tipo" [innerHTML]="hist?.tipo"></div>
                                                    </ng-container>

                                                    <div class="flex flex-col sm:flex-row sm:items-center mt-2 sm:mt-1 sm:space-x-2 text-md leading-5">
                                                        <div class="text-secondary" *ngIf="hist.tipoIntervencao?.nomTipoIntervencao">
                                                            Intervenção: {{ hist.tipoIntervencao?.nomTipoIntervencao }}
                                                        </div>
                                                    </div>

                                                    <div *ngIf="hist.tecnico?.nome" class="flex flex-col sm:flex-row sm:items-center mt-2 sm:mt-1 sm:space-x-2 text-md leading-5">
                                                        <div class="text-secondary" *ngIf="hist.tecnico?.nome">
                                                            Técnico: {{ hist.tecnico?.nome }}
                                                        </div>
                                                    </div>

                                                    <div class="flex flex-col sm:flex-row sm:items-center mt-2 sm:mt-1 sm:space-x-2 text-md leading-5">
                                                        <div class="text-secondary" *ngIf="hist.cliente?.nomeFantasia">
                                                            Cliente: {{ hist.cliente?.nomeFantasia }}
                                                        </div>
                                                    </div>

                                                    <div class="flex flex-col sm:flex-row sm:items-center mt-2 sm:mt-1 sm:space-x-2 text-md leading-5">
                                                        <div class="text-secondary" *ngIf="hist.localAtendimento?.nomeLocal">
                                                            Local: {{ hist.localAtendimento?.nomeLocal }}
                                                        </div>
                                                    </div>

                                                    <div *ngIf="hist.equipamentoContrato?.numSerie" class="flex flex-col sm:flex-row sm:items-center mt-2 sm:mt-1 sm:space-x-2 text-md leading-5">
                                                        <div class="text-secondary" *ngIf="hist.equipamentoContrato?.numSerie">
                                                            Série: {{ hist.equipamentoContrato?.numSerie }}
                                                        </div>
                                                    </div>

                                                    <div *ngIf="hist.autorizada?.nomeFantasia" class="flex flex-col sm:flex-row sm:items-center mt-2 sm:mt-1 sm:space-x-2 text-md leading-5">
                                                        <div class="text-secondary" *ngIf="hist.autorizada?.nomeFantasia">
                                                            Autorizada: {{ hist.autorizada?.nomeFantasia }}
                                                        </div>
                                                    </div>

                                                    <div *ngIf="hist.usuario?.nomeUsuario" class="flex flex-col sm:flex-row sm:items-center mt-2 sm:mt-1 sm:space-x-2 text-md leading-5">
                                                        <div class="text-secondary" *ngIf="hist.usuario?.nomeUsuario">
                                                            Usuário: {{ hist.usuario?.nomeUsuario }}
                                                        </div>
                                                    </div>

                                                    <div class="flex flex-col sm:flex-row sm:items-center mt-2 sm:mt-1 sm:space-x-2 text-md leading-5">
                                                        <div class="text-secondary">
                                                            <span *ngIf="hist.dataHoraCad && !hist.dataHoraCadSmartphone">
                                                                Atualizado em: {{ hist.dataHoraCad | date:'dd/MM/yy HH:mm:ss' }}
                                                            </span>

                                                            <span *ngIf="hist.dataHoraCadSmartphone">
                                                                Atualizado em: {{ hist.dataHoraCadSmartphone | date:'dd/MM/yy HH:mm:ss' }}
                                                            </span>

                                                            <div *ngIf="hist.dataHoraCadSmartphone">
                                                                Técnico: {{ hist.codUsuarioCad }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                    </ng-container>
                                </ol>
                            </ng-template>
                        </mat-tab>

                        <!-- RELATORIOS DE ATENDIMENTO -->
                        <mat-tab [disabled]="!os?.relatoriosAtendimento?.length" *ngIf="!this.perfilCliente">
                            <ng-template matTabLabel>
                                <span [class.opacity-50]="!os?.relatoriosAtendimento?.length">
                                    {{ t('relatorios') }}

                                    <span class="bg-blue-500 text-blue-50 py-1 px-2 rounded text-xs font-bold ml-1"
                                        *ngIf="os?.relatoriosAtendimento?.length">
                                        {{ os?.relatoriosAtendimento?.length }}
                                    </span>
                                </span>
                            </ng-template>

                            <ng-template matTabContent>
                                <fuse-card class="flex flex-col flex-auto p-6 pt-px w-2/3 mb-2"
                                    *ngFor="let r of os.relatoriosAtendimento; let i=index;">
                                    <div class="flex items-center justify-between mt-5">
                                        <div class="text-xl font-medium">RAT {{ r?.numRAT }}</div>
                                        <div>
                                            <button mat-icon-button
                                                [routerLink]="['/relatorio-atendimento/form/'+ codOS + '/' + r.codRAT]"
                                                matTooltip="Editar RAT">
                                                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:pencil'">
                                                </mat-icon>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="flex flex-col mt-4 border-t border-b divide-y font-medium">
                                        <div class="flex items-center justify-between py-3">
                                            <div class="text-secondary">Número</div>
                                            <div>{{ r?.numRAT }}</div>
                                        </div>
                                        <div class="flex items-center justify-between py-3">
                                            <div class="text-secondary">Técnico</div>
                                            <div>{{ r?.tecnico?.nome | titlecase }}</div>
                                        </div>
                                        <div class="flex items-center justify-between py-3">
                                            <div class="text-secondary">Status</div>
                                            <div> {{ r?.statusServico?.nomeStatusServico || 'Não Informado'}} </div>
                                        </div>
                                        <div class="flex items-center justify-between py-3">
                                            <div class="text-secondary">Solicitação</div>
                                            <div> {{ r?.dataHoraSolicitacao ? (r?.dataHoraSolicitacao | date:'dd/MM HH:mm') : 'Não Informado' }}</div>
                                        </div>
                                        <div class="flex items-center justify-between py-3">
                                            <div class="text-secondary">Horas Gastas</div>
                                            <div>
                                                {{ r?.qtdeHorasTecnicas ? (getTimeFromMins(r?.qtdeHorasTecnicas)) : 'Não Informado' }}
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between py-3">
                                            <div class="text-secondary">Horário atendimento</div>
                                            <div> {{ r?.dataHoraInicio ? (r?.dataHoraInicio | date:'dd/MM HH:mm') : 'Não Informado' }} - {{ r?.dataHoraSolucao ?
                                                (r?.dataHoraSolucao | date:'dd/MM HH:mm') : 'Não Informado' }}</div>
                                        </div>
                                        <div class="flex items-center justify-between py-3">
                                            <div class="text-secondary">Intervalo</div>
                                            <div> {{ r?.horarioInicioIntervalo ? (r?.horarioInicioIntervalo) : 'Não Informado' }} - {{ r?.horarioTerminoIntervalo ?
                                                (r?.horarioTerminoIntervalo) : 'Não Informado' }}</div>
                                        </div>
                                        <div class="flex items-center justify-between py-3">
                                            <div class="text-secondary">Acompanhante</div>
                                            <div> {{ r?.nomeAcompanhante || 'Não Informado' }} </div>
                                        </div>
                                    </div>

                                    <div class="flex items-center justify-between mt-8">
                                        <div class="text-lg font-medium">Observação</div>
                                    </div>
                                    <div class="flex mt-2 border-t">
                                        <div class="py-3">
                                            <ng-container>
                                                <div class="italic text-secondary"> {{ r.obsRAT || 'Não Informado' }}
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>

                                    <div class="flex items-center justify-between mt-8">
                                        <div class="text-lg font-medium">Solução</div>
                                    </div>
                                    <div class="flex mt-2 border-t">
                                        <div class="py-3">
                                            <ng-container>
                                                <div class="italic text-secondary"> {{ r.relatoSolucao || 'Não Informado' }}
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>                                    
                                    <div class="flex items-center justify-between mt-8">
                                        <div class="text-lg font-medium">Detalhes</div>
                                    </div>
                                    <div *ngFor="let r of let detalhe of r.relatorioAtendimentoDetalhes; let i=index;">
                                        <div class="flex flex-col items-start mt-2">
                                            <div class="text-lg font-medium">{{i+1}}&ordm; Detalhe</div>
                                        </div>
                                        <div class="flex flex-col mt-4 border-t border-b divide-y font-medium">
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">Serviço</div>
                                                <div>{{ detalhe?.tipoServico?.codETipoServico }} -
                                                    {{ detalhe?.tipoServico?.nomeServico }}</div>
                                            </div>
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">Causa</div>
                                                <div>
                                                    {{ detalhe?.causa?.codECausa }} -
                                                    {{ detalhe?.causa?.nomeCausa || 'Não Informado' }}
                                                </div>
                                            </div>

                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">Defeito</div>
                                                <div> {{ detalhe?.defeito?.codEDefeito }} -
                                                    {{ detalhe?.defeito?.nomeDefeito | titlecase }}</div>
                                            </div>
                                            <div class="flex items-center justify-between py-3">
                                                <div class="text-secondary">Ação</div>
                                                <div>{{ detalhe?.acao?.codEAcao }} -
                                                    {{ detalhe?.acao?.nomeAcao | titlecase }}</div>
                                            </div>
                                        </div>
                                        <div class="mb-8" *ngIf="detalhe?.relatorioAtendimentoDetalhePecas?.length">
                                            <div class="flex items-center justify-between mt-8">
                                                <div class="text-lg font-medium">Peças</div>
                                            </div>
                                            <div class="mt-4 border-b font-medium grid grid-flow-row grid-cols-8 p-1">
                                                <div class="col-span-1">Cód.Magnus</div>
                                                <div class="col-span-4">Nome</div>
                                                <div class="col-span-1">Quantidade</div>
                                                <div class="col-span-2">Status Peça</div>
                                            </div>
                                            <div class="text-secondary border-b grid grid-flow-row grid-cols-8 p-1"
                                                *ngFor=" let peca of
                                            detalhe.relatorioAtendimentoDetalhePecas;">
                                                <div class="col-span-1">{{ peca?.peca?.codMagnus }}</div>
                                                <div class="col-span-4">{{ peca?.peca?.nomePeca | uppercase }}</div>
                                                <div class="col-span-1"> {{ peca?.qtdePecas }} </div>
                                                <div class="col-span-2"> {{ peca?.descStatus || "PEÇA PENDENTE" | uppercase  }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </fuse-card>
                            </ng-template>
                        </mat-tab>

                        <!-- FOTOS -->
                        <mat-tab [disabled]="!qtdFotos" *ngIf="!this.perfilCliente">
                            <ng-template matTabLabel>
                                <span [class.opacity-50]="!qtdFotos">
                                    {{ t('fotos') }}
                                    <span
                                        class="bg-blue-500 text-blue-50 py-1 px-2 rounded text-xs font-bold ml-1"
                                        *ngIf="qtdFotos">
                                        {{ qtdFotos }}
                                    </span>
                                </span>
                            </ng-template>

                            <ng-template matTabContent>
                                <div
                                    *ngFor="let rat of os?.relatoriosAtendimento"
                                    class="sm:col-span-2 lg:col-span-3 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden mb-4">
                                    <div *ngIf="rat.fotos.length">
                                        <div class="flex items-center justify-between mt-6 -mb-3 ml-8 mr-6 sm:mr-10">
                                            <div class="flex flex-col">
                                                <div class="mr-4 text-2xl md:text-3xl font-semibold tracking-tight leading-7">
                                                    {{ rat.numRAT }}
                                                </div>
    
                                                <div class="font-medium text-secondary">
                                                    {{ rat.fotos.length }} Fotos
                                                </div>
                                            </div>
                                        </div>
    
                                        <hr>
    
                                        <div class="flex flex-col flex-auto px-8 pb-4" *ngIf="filtrarFotosRAT('RAT', rat.fotos).length">
                                            <div class="font-semibold text-secondary mb-3">
                                                Relatório de Atendimento
                                            </div>
    
                                            <app-ordem-servico-fotos [fotos]="filtrarFotosRAT('RAT', rat.fotos)"></app-ordem-servico-fotos>
                                        </div>
    
                                        <div class="flex flex-col flex-auto px-8 pb-6" *ngIf="filtrarFotosRAT('LAUDO', rat.fotos).length">
                                            <div class="font-semibold text-secondary mb-3">
                                                Laudo
                                            </div>
    
                                            <app-ordem-servico-fotos [fotos]="filtrarFotosRAT('LAUDO', rat.fotos)"></app-ordem-servico-fotos>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </mat-tab>

                        <!-- LAUDOS -->
                        <mat-tab [disabled]="!qtdLaudos" *ngIf="!this.perfilCliente">
                            <ng-template matTabLabel>
                                <span [class.opacity-50]="!qtdLaudos">
                                    {{ t('laudos') }}

                                    <span class="bg-blue-500 text-blue-50 py-1 px-2 rounded text-xs font-bold ml-1"
                                        *ngIf="qtdLaudos">
                                        {{ qtdLaudos }}
                                    </span>
                                </span>
                            </ng-template>

                            <ng-template matTabContent>
                                <div *ngFor="let r of os.relatoriosAtendimento; let i=index;">
                                    <fuse-card class="flex flex-col flex-auto p-6 pt-px w-2/3 mb-4" *ngIf="r.laudos.length">
                                        <div *ngFor="let laudo of r.laudos;">
                                            <div class="flex items-center justify-between mt-5">
                                                <div class="text-xl font-medium">
                                                    Laudo - 
                                                    <span class="text-secondary">
                                                        RAT {{ r.numRAT }}
                                                    </span>
                                                </div>
    
                                                <div>
                                                    <button
                                                        mat-icon-button
                                                        [routerLink]="['/relatorio-atendimento/form/'+codOS+'/'+r.codRAT+'/impressao-laudo/'+laudo.codLaudo]"
                                                        matTooltip="Imprimir">
                                                        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:printer'">
                                                        </mat-icon>
                                                    </button>
                                                </div>
                                            </div>
    
                                            <div class="flex flex-col mt-4 border-t border-b divide-y font-medium">
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">RAT</div>
                                                    <div>{{ r.numRAT }}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Técnico</div>
                                                    <div>{{ r.tecnico.nome }}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Matrícula do Cliente</div>
                                                    <div>{{ laudo.matriculaCliente }}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Matrícula do Cliente</div>
                                                    <div>{{ laudo.nomeCliente }}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Data de Cadastro</div>
                                                    <div>{{ laudo.dataHoraCad | date:'dd/MM/yyyy HH:mm' }}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Ativo</div>
                                                    <div>{{ laudo.indAtivo === 1 ? 'SIM' : 'NÂO'}}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Status</div>
                                                    <div>{{ laudo.laudoStatus.nomeStatus  }}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Última Modificação</div>
                                                    <div>{{ laudo.codUsuarioManut }}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Possui Ar Condicionado?</div>
                                                    <div>{{ laudo.indPossuiArCond === 1 ? 'SIM' : 'NÂO'}}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Temperatura</div>
                                                    <div>{{ laudo.temperatura }}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Possui No-Break?</div>
                                                    <div>{{ laudo.indPossuiNobreak === 1 ? 'SIM' : 'NÂO'}}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Rede Estabilizada?</div>
                                                    <div>{{ laudo.indRedeEstabilizada === 1 ? 'SIM' : 'NÂO'}}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Tensão com Carga</div>
                                                    <div>{{ laudo.tensaoComCarga }}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Tensão sem Carga</div>
                                                    <div>{{ laudo.tensaoSemCarga }}</div>
                                                </div>
    
                                                <div class="flex items-center justify-between py-3">
                                                    <div class="text-secondary">Tensão entre Terra e Neutro</div>
                                                    <div>{{ laudo.tensaoTerraENeutro }}</div>
                                                </div>
                                            </div>
    
                                            <div class="flex items-center justify-between mt-8" *ngIf="laudo.relatoCliente">
                                                <div class="text-lg font-medium">Relato do Cliente</div>
                                            </div>
    
                                            <div class="flex mt-2 border-t" *ngIf="laudo.relatoCliente">
                                                <div class="pt-3">
                                                    <ng-container>
                                                        <div class="italic text-secondary">
                                                            {{ laudo.relatoCliente }}
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
        
                                            <div class="flex items-center justify-between mt-8" *ngIf="laudo.conclusao">
                                                <div class="text-lg font-medium">Conclusão</div>
                                            </div>
    
                                            <div class="flex mt-2 border-t" *ngIf="laudo.conclusao">
                                                <div class="pt-3">
                                                    <ng-container>
                                                        <div class="italic text-secondary">
                                                            {{ laudo.conclusao }}
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
    
                                            <div class="flex items-center justify-between mt-8" *ngIf="laudo.justificativa">
                                                <div class="text-lg font-medium">Justificativa</div>
                                            </div>
    
                                            <div class="flex mt-2 border-t" *ngIf="laudo.justificativa">
                                                <div class="pt-3">
                                                    <ng-container>
                                                        <div class="italic text-secondary">
                                                            {{ laudo.justificativa }}
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>
                                    </fuse-card>
                                </div>
                            </ng-template>
                        </mat-tab>
                        
                        <!-- EQUIPAMENTO -->
                        <mat-tab [disabled]="!os?.codEquipContrato" *ngIf="!this.perfilCliente">
                            <ng-template matTabLabel>
                                <span>
                                    {{ t('oss do equipamento') }}
                                </span>
                            </ng-template>

                            <ng-template matTabContent>
                                <app-ordem-servico-historico [codOS]="codOS" [codEquipContrato]="os.codEquipContrato">
                                </app-ordem-servico-historico>
                            </ng-template>
                        </mat-tab>

                        <!-- ORCAMENTOS -->
                        <mat-tab *ngIf="!this.perfilCliente">
                            <ng-template matTabLabel>
                                <span>
                                    {{ t('orcamentos') }}

                                    <span class="bg-blue-500 text-blue-50 py-1 px-2 rounded text-xs font-bold ml-1">
                                        {{ orcamentos?.length }}
                                    </span>
                                </span>
                            </ng-template>

                            <ng-template matTabContent>
                                <app-ordem-servico-detalhe-orcamentos [os]="os" [orcamentos]="orcamentos">
                                </app-ordem-servico-detalhe-orcamentos>
                            </ng-template>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </div>
        </div>
    </mat-drawer-content>
</mat-drawer-container>